{% extends "/dashboard/layout.html" %}

{% block content %}
    <div class="flex mx-16 justify-center mt-16">
        <div class="w-1/3 shadow-xl mx-4">
            <div class="bg-zinc-900 border-b-2 border-blue-500 rounded-t flex items-center">
                <h2 class="text-white p-3 text-3xl">Update password</h2>
            </div>
            <div class="bg-zinc-800/70 w-full inline-flex justify-center">
                <div class="w-full">
                    <form action="/api/password/{{ session['id'] }}/update" method="post" class="pt-4 text-white">
                        <input type="text" name="csrf_token" value="{{ session['csrf_token'] }}" hidden>
                        <div class="m-5">
                            <div class="my-2 flex-col flex">
                                <label for="new_password" class="text-neutral-100 my-1">Enter a new password</label>
                                <input type="password" name="new_password" class="rounded bg-zinc-700 py-2 px-4 text-xl" required>
                            </div>
                            <div class="my-2 flex-col flex">
                                <label for="password" class="text-neutral-100 my-1">Enter your password</label>
                                <input type="password" name="password" class="rounded bg-zinc-700 py-2 px-4 text-xl" required>
                            </div>
                            <input type="submit" id="update_password" hidden>
                        </div>
                    </form>
                </div>
            </div>
            <div class="bg-zinc-800/70 rounded-b p-4">
                {% if get_flashed_messages() %}
                    <div class="flex justify-between items-center">
                        {% if get_flashed_messages(with_categories=true)[0][0] == "error" %}
                            <h2 class="text-red-500">{{ get_flashed_messages(with_categories=true)[0][1] }}</h2>
                        {% endif %}
                        {% if get_flashed_messages(with_categories=true)[0][0] == "succes" %}
                            <h2 class="text-neutral-100">{{ get_flashed_messages(with_categories=true)[0][1] }}</h2>
                        {% endif %}
                        <a onclick="document.getElementById('update_password').click()" class="text-center select-none text-white font-semibold bg-blue-500 hover:bg-blue-600 duration-300 rounded px-4 py-1 mx-1">Update Password</a>
                    </div>
                {% else %}
                    <div class="flex justify-end items-center">
                        <a onclick="document.getElementById('update_password').click()" class="text-center select-none text-white font-semibold bg-blue-500 hover:bg-blue-600 duration-300 rounded px-4 py-1 mx-1">Update Password</a>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="w-1/3 shadow-xl mx-4">
            <div class="bg-zinc-900 border-b-2 border-blue-500 rounded-t flex items-center">
                <h2 class="text-white p-3 text-3xl">Update username</h2>
            </div>
            <div class="bg-zinc-800/70 w-full inline-flex justify-center">
                <div class="w-full">
                    <form action="/api/username/{{ session['id'] }}/update" method="post" class="pt-4 text-white">
                        <input type="text" name="csrf_token" value="{{ session['csrf_token'] }}" hidden>
                        <div class="m-5">
                            <div class="my-2 flex-col flex overflow-auto">
                                <label for="username" class="text-neutral-100 my-1">Enter a new username</label>
                                <input type="text" name="username" value="{{ session['username'] }}" class="rounded bg-zinc-700 py-2 px-4 text-xl" required>
                            </div>
                            <div class="my-2 flex-col flex overflow-auto">
                                <label for="password" class="text-neutral-100 my-1">Enter your password</label>
                                <input type="password" name="password" class="rounded bg-zinc-700 py-2 px-4 text-xl" required>
                            </div>
                            <input type="submit" id="update_username" hidden>
                        </div>
                    </form>
                </div>
            </div>
            <div class="bg-zinc-800/70 rounded-b p-4">
                {% if get_flashed_messages() %}
                    <div class="flex justify-between items-center">
                        {% if get_flashed_messages(with_categories=true)[0][0] == "error" %}
                            <h2 class="text-red-500">{{ get_flashed_messages(with_categories=true)[0][1] }}</h2>
                        {% endif %}
                        {% if get_flashed_messages(with_categories=true)[0][0] == "succes" %}
                            <h2 class="text-neutral-100">{{ get_flashed_messages(with_categories=true)[0][1] }}</h2>
                        {% endif %}
                        <a onclick="document.getElementById('update_username').click()" class="text-center select-none text-white font-semibold bg-blue-500 hover:bg-blue-600 duration-300 rounded px-4 py-1 mx-1">Update Username</a>
                    </div>
                {% else %}
                    <div class="flex justify-end items-center">
                        <a onclick="document.getElementById('update_username').click()" class="text-center select-none text-white font-semibold bg-blue-500 hover:bg-blue-600 duration-300 rounded px-4 py-1 mx-1">Update Username</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}